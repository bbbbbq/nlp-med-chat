#!/usr/bin/env python3
"""
æµ‹è¯•é«˜åŒ¹é…åº¦ç—‡çŠ¶ï¼Œå°è¯•è§¦å‘RAGå¢žå¼ºè¯Šæ–­
"""

import sys
import os
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from chat import SymptomExtractor

def test_high_match_symptoms():
    """æµ‹è¯•é«˜åŒ¹é…åº¦ç—‡çŠ¶"""
    print("ðŸ§ª æµ‹è¯•é«˜åŒ¹é…åº¦ç—‡çŠ¶...")
    
    # åˆå§‹åŒ–ç—‡çŠ¶æå–å™¨
    extractor = SymptomExtractor()
    
    # ä½¿ç”¨æ›´å…·ä½“çš„åŒ»å­¦æœ¯è¯­ï¼Œå¯èƒ½ä¼šæœ‰æ›´é«˜çš„åŒ¹é…åº¦
    specific_symptoms = [
        # å¿ƒè¡€ç®¡ç³»ç»Ÿ
        """
        ã€å½±åƒç±»åž‹ã€‘ï¼šå¿ƒç”µå›¾å’Œèƒ¸éƒ¨Xå…‰
        ã€è§‚å¯Ÿåˆ°çš„ç—‡çŠ¶ã€‘ï¼š
        1. å¿ƒå¾‹ä¸é½
        2. STæ®µæŠ¬é«˜
        3. å¿ƒè‚Œç¼ºè¡€
        4. å† çŠ¶åŠ¨è„‰ç‹­çª„
        ã€å¼‚å¸¸åŒºåŸŸã€‘ï¼šå¿ƒè„å† çŠ¶åŠ¨è„‰
        ã€ä¸¥é‡ç¨‹åº¦ã€‘ï¼šä¸¥é‡
        """,
        
        # å‘¼å¸ç³»ç»Ÿ
        """
        ã€å½±åƒç±»åž‹ã€‘ï¼šèƒ¸éƒ¨CT
        ã€è§‚å¯Ÿåˆ°çš„ç—‡çŠ¶ã€‘ï¼š
        1. è‚ºéƒ¨ç»“èŠ‚
        2. æ”¯æ°”ç®¡æ‰©å¼ 
        3. è‚ºæ°”è‚¿
        4. èƒ¸è…”ç§¯æ¶²
        ã€å¼‚å¸¸åŒºåŸŸã€‘ï¼šåŒä¾§è‚ºé‡Ž
        ã€ä¸¥é‡ç¨‹åº¦ã€‘ï¼šä¸­ç­‰
        """,
        
        # æ¶ˆåŒ–ç³»ç»Ÿ
        """
        ã€å½±åƒç±»åž‹ã€‘ï¼šè…¹éƒ¨CT
        ã€è§‚å¯Ÿåˆ°çš„ç—‡çŠ¶ã€‘ï¼š
        1. è‚è„è‚¿å¤§
        2. èƒ†å›Šç‚Ž
        3. èƒ°è…ºç‚Ž
        4. è…¹è…”ç§¯æ¶²
        ã€å¼‚å¸¸åŒºåŸŸã€‘ï¼šè…¹è…”å™¨å®˜
        ã€ä¸¥é‡ç¨‹åº¦ã€‘ï¼šä¸­ç­‰
        """,
        
        # ç¥žç»ç³»ç»Ÿ
        """
        ã€å½±åƒç±»åž‹ã€‘ï¼šå¤´éƒ¨MRI
        ã€è§‚å¯Ÿåˆ°çš„ç—‡çŠ¶ã€‘ï¼š
        1. è„‘æ¢—å¡ž
        2. è„‘å‡ºè¡€
        3. é¢…å†…åŽ‹å¢žé«˜
        4. è„‘æ°´è‚¿
        ã€å¼‚å¸¸åŒºåŸŸã€‘ï¼šå¤§è„‘çš®å±‚
        ã€ä¸¥é‡ç¨‹åº¦ã€‘ï¼šä¸¥é‡
        """
    ]
    
    for i, symptoms in enumerate(specific_symptoms, 1):
        print(f"\n{'='*60}")
        print(f"ðŸ“‹ æµ‹è¯•ç”¨ä¾‹{i}ï¼šå…·ä½“åŒ»å­¦ç—‡çŠ¶")
        print("="*60)
        print("è¾“å…¥ç—‡çŠ¶ï¼š", symptoms.strip())
        
        result = extractor.generate_diagnosis_advice(symptoms)
        print(f"\nè¯Šæ–­ç»“æžœï¼š{result[:300]}..." if len(result) > 300 else result)

if __name__ == "__main__":
    test_high_match_symptoms()
